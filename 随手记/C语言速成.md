# C语言

> 因为想重新学习数据结构，而数据结构要用到的c语言都忘记的差不多了，所以现在重新学过，学习网站：https://www.dotcpp.com/course/c/

## 第一个C语言程序

```c
#include <stdio.h> // 使用#include可引入头文件

int main() { // 每个c程序有且只能有一个main函数，程序将从main函数开始执行
    int number; // 定义一个int类型，名为number的变量
    number = 2021; // 将2021赋值给number
    printf("Hello %d", number); // 打印，%d表示输出位置和形式，将输出： Hello 2021
    return 0;
}
```

- `#include`是个预处理指令，表示将什么什么引入
- stdio.h是c语言的标准输入输出文件，只有引入了这个文件，才可以使用printf，scanf等函数

## 数据类型

数据可分为变量和常量，变量指的是在程序运行时可以改变的量，而常量则是不能改变的量

各种数据类型：

| 类型名称       | 占字节数 |
| -------------- | -------- |
| char           | 1        |
| unsigned char  | 1        |
| int            | 4        |
| unsigned int   | 4        |
| short          | 2        |
| unsigned short | 2        |
| long           | 4        |
| unsigned long  | 4        |
| float          | 4        |
| double         | 8        |
| long double    | 10       |

## 输入输出

putchar-输出单个字符，如`putchar('a')`，就会输出`a`

printf-格式化输出，以%d等类似的形式占位

| 格式字符 | 说明                                               |
| -------- | -------------------------------------------------- |
| d , i    | 以十进制形式输出有符号整数(正数不输出符号)         |
| O        | 以八进制形式输出无符号整数(不输出前缀0)            |
| x        | 以十六进制形式输出无符号整数(不输出前缀0x)         |
| U        | 以十进制形式输出无符号整数                         |
| f        | 以小数形式输出单、双精度类型实数                   |
| e        | 以指数形式输出单、双精度实数                       |
| g        | 以%f或%e中较短输出宽度的一种格式输出单、双精度实数 |
| C        | 输出单个字符                                       |
| S        | 输出字符串                                         |

getchar-输入单个字符，这样用：

```c
char c;
c = getchar();
```

scanf-输入函数，返回值是成功读入的数量，如此使用：

```c
int num;
scanf("%d",&num); // &是地址运算符
```

## 基本运算符

赋值运算符`=`，表示把右边的东西赋给左边的变量（即可修改的左值）

单目运算符：

`++`，`--`，但在操作数左边时，表示先计算在使用，当在右边时，表示先使用在计算

`sizeof`求长度运算符

双目运算符：

| 运算符 | 符号 | 操作                               | 用例 | 结果                             |
| ------ | ---- | ---------------------------------- | ---- | -------------------------------- |
| 加法   | +    | 使它两侧的值加到一起               | 1+2  | 3                                |
| 减法   | -    | 从它前面的数减去后面的数           | 5-3  | 2                                |
| 乘法   | *    | 将它前面的数乘以后面的数           | 2*3  | 6                                |
| 除法   | /    | 用它左边的值除以右边的值           | 8/3  | 2(整数的除法会丢掉小数部分)      |
| 取模   | %    | 求用它左边的值除以右边的数后的余数 | 5%3  | 2(%运算符两侧的操作数必须为整数) |

三目运算符

```c
int a = 5;
a > 0 ?--a:++a;
// 最终 a = 4
```

## 程序流

选择结构

```c
if(flag>=90) {
    printf("Good\n");
} else if(flag>=60) {
    printf("passed");
} else {
    printf("failed\n");
}
```

```c
switch(value)
{
    case 1:printf("one");break;
    case 2:printf("two");break;
    case 3:printf("three");break;
    default:printf("other");break;
}
```

循环结构

```c
while(i++<10)
{
    printf(“count %d ”,i);
}
```

```c
do
{
    printf("count %d"，i);
}while(i<20);
```

```c
for(i=0;i<100;i++)
{
    printf("i count is %d\n",i);
}
```

## 函数

```c
// 函数的声明
int plus(int a, int b);
// 函数的定义
int plus(int a, int b) { // int是返回类型，plus是函数名，然后是参数a，b
    return a + b;
}
```

在main函数中使用函数时，应该对被调函数进行声明，目的是 使编译系统知道被调函数**返回值的类型**

## 变量的存储类型

C 语言中定义了 4 种存储属性,即自动变量、外部变量、静态变量和寄存器变量,它关系到变量在内存中的存放位置, 由此决定了变量的保留时间和变量的作用范围。 

自动变量-auto

外部变量-extern

静态变量-static

寄存器变量-register

## 数组

```c
int a[100]; // 定义一个int类型，长度为100的一维数组
int a[100] = {1, 2, 3};// 定义数组，并赋值前三个值，其他没有赋值的会有默认值0
int a[3][4];// 定义一个int类型，3行，4列的二维数组
int a[3][4]={{1,2,3,4},{10,20,30,40},{100,200,300,400}};// 定义二维数组，并初始化
```

```c
char c[10]; // 定义一个字符数组
char c[6]={'c', 'h', 'i', 'n', 'a' , '\0' };// 定义并初始化
char a[]={"china"};// 也可以这样
```

## 指针

c语言的精华所在

地址：在逻辑内存的编号，地址运算符`&`得到变量的地址

指针：指针也是一个变量，不过**存储的是地址**

```c
int *p;// 定义一个指向int类型，名字为p的指针变量，即用int *来定义了一个指针
int a = 199;
p = &a; // 将a的地址赋给p
printf("%d", *p); // 输出199，这里的*号是可以获取地址上对应的值
```

**这里要理解好`*`号的作用，它可以用来定义指针，也可以用来获取地址上对应的值**，另外，因为指针变量存储的只能是地址，所以只能将地址赋给指针变量，其他的不行

数组指针：

```c
int arr[5] = {1, 2, 3, 4, 5};
int *p = arr; // 定义一个指针变量，然后将arr数组的地址赋给其，此时p存储的时第一个值的地址
printf("arr[1] = %d,arr[1] = %d", *(p + 1), p[1]);// 可以通过这两种方式来访问数组元素
```

字符串指针

```c
int *str = "Welcome to China";
str[0] = 'c'; // 报错
```

字符串指针不能改变值，字符串数组可以

## 结构体

```c
// 定义一个结构体
struct Student {
    char name[255];
    int score;
};
```

```c
// 共用体，这是个啥我勒宝贝
union INFO {
        int a;
        int b;
        int c;
};
```

```c
// 使用typedef定义类型
typedef int INTEGER; // 这样定义后就可以通过 INTEGER name来定义一个int类型的变量了
// 给结构体重命名，这样就可以通过INFO name来定义一个结构体了
typedef struct _INFO
{
    int num;
    char str[256];
}INFO;
```

## 文件读写

```c
FILE *fp;
fp = fopen("E:\\text.txt", "r+"); // 以读写的方式打开文件
fprintf(fp, "%s", "great work");// 写入文件
char str[100];
fscanf(fp, "%s", str); // 读取文件,并将其赋值给str
```

操作参数：

| 参数 | 作用                                                         |
| ---- | ------------------------------------------------------------ |
| r    | 以只读方式打开文件，该文件必须存在。                         |
| r+   | 以读/写方式打开文件，该文件必须存在。                        |
| rb+  | 以读/写方式打开一个二进制文件，只允许读/写数据。             |
| rt+  | 以读/写方式打开一个文本文件，允许读和写。                    |
| w    | 打开只写文件，若文件存在则文件长度清为零，即该文件内容会消失；若文件不存在则创建该文件。 |
| w+   | 打开可读/写文件，若文件存在则文件长度清为零，即该文件内容会消失；若文件不存在则创建该文件。 |
| a    | 以附加的方式打开只写文件。若文件不存在，则会创建该文件；如果文件存在，则写入的数据会被加到文件尾后，即文件原先的内容会被保留（EOF 符保留）。 |
| a+   | 以附加方式打开可读/写的文件。若文件不存在，则会创建该文件，如果文件存在，则写入的数据会被加到文件尾后，即文件原先的内容会被保留（EOF符不保留）。 |
| wb   | 以只写方式打开或新建一个二进制文件，只允许写数据。           |
| wb+  | 以读/写方式打开或新建一个二进制文件，允许读和写。            |
| wt+  | 以读/写方式打开或新建一个文本文件，允许读和写。              |
| at+  | 以读/写方式打开一个文本文件，允许读或在文本末追加数据。      |
| ab+  | 以读/写方式打开一个二进制文件，允许读或在文件末追加数据。    |



## 宏定义

宏定义是预处理命令

```c
#define ZERO 0
#define MAX(a, b) (a>b)?a:b // 还可以带有参数
```

## 条件编译

```c
#ifndef XX_H // 如果没有定义过什么，则执行
// 。。。 
##endif 
```

